  {% extends 'templates/base/base.html' %}
  {% block content %}
  <div class="box__body">
    <div class="box__dates body-panel">
        <div class="input-wrap">
        <input  id="input-search" type="text" class="input input--icon" placeholder="Начните вводить слово">
        <label class="input-wrap-icon" for="input-search"></label>
        </div>
        <!-- <div class="body-panel__create-pos blue-button">Создать съем позиций</div> -->
        <div class="body-panel__remain">
        Осталось запросов
        <span class="body-panel__remain-count">2699</span>
        </div>
    </div>
  </div>
  <div class="positions rent">
    <div class="rent__header">
        <div class="rent__header__name">
            <label for="word" class="checkbox">
                <input type="checkbox" role="switch" id="word" class="all-positions">
                <span>Проекты</span>
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5.42857 10C5.34898 10 5.27096 9.97931 5.20326 9.94026C5.13555 9.90121 5.08084 9.84533 5.04525 9.77889C5.00965 9.71244 4.99458 9.63806 5.00173 9.56408C5.00888 9.49009 5.03796 9.41943 5.08571 9.36L7.65714 6.16C7.69706 6.11032 7.74883 6.07 7.80834 6.04223C7.86785 6.01446 7.93347 6 8 6C8.06653 6 8.13215 6.01446 8.19166 6.04223C8.25117 6.07 8.30294 6.11032 8.34286 6.16L10.9143 9.36C10.962 9.41943 10.9911 9.49009 10.9983 9.56408C11.0054 9.63806 10.9903 9.71244 10.9548 9.77889C10.9192 9.84533 10.8644 9.90121 10.7967 9.94026C10.729 9.97931 10.651 10 10.5714 10H5.42857Z" fill="#404040"></path>
                </svg>
            </label>
        </div>
        <div class="rent__header__domain">
          <span>
            <span>Домен</span>
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5.42857 10C5.34898 10 5.27096 9.97931 5.20326 9.94026C5.13555 9.90121 5.08084 9.84533 5.04525 9.77889C5.00965 9.71244 4.99458 9.63806 5.00173 9.56408C5.00888 9.49009 5.03796 9.41943 5.08571 9.36L7.65714 6.16C7.69706 6.11032 7.74883 6.07 7.80834 6.04223C7.86785 6.01446 7.93347 6 8 6C8.06653 6 8.13215 6.01446 8.19166 6.04223C8.25117 6.07 8.30294 6.11032 8.34286 6.16L10.9143 9.36C10.962 9.41943 10.9911 9.49009 10.9983 9.56408C11.0054 9.63806 10.9903 9.71244 10.9548 9.77889C10.9192 9.84533 10.8644 9.90121 10.7967 9.94026C10.729 9.97931 10.651 10 10.5714 10H5.42857Z" fill="#404040"></path>
            </svg>
          </span>
        </div>
        <div class="rent__header__pos">
          <span>
            <span>Количество позиций</span>
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5.42857 10C5.34898 10 5.27096 9.97931 5.20326 9.94026C5.13555 9.90121 5.08084 9.84533 5.04525 9.77889C5.00965 9.71244 4.99458 9.63806 5.00173 9.56408C5.00888 9.49009 5.03796 9.41943 5.08571 9.36L7.65714 6.16C7.69706 6.11032 7.74883 6.07 7.80834 6.04223C7.86785 6.01446 7.93347 6 8 6C8.06653 6 8.13215 6.01446 8.19166 6.04223C8.25117 6.07 8.30294 6.11032 8.34286 6.16L10.9143 9.36C10.962 9.41943 10.9911 9.49009 10.9983 9.56408C11.0054 9.63806 10.9903 9.71244 10.9548 9.77889C10.9192 9.84533 10.8644 9.90121 10.7967 9.94026C10.729 9.97931 10.651 10 10.5714 10H5.42857Z" fill="#404040"></path>
            </svg>
          </span>
        </div>
    </div>
    <div class="rent__items">
      {% for project in list_names %}
        <div class="rent__item item-rent item-pos">
            <div class="item-rent__name item-rent-block">
              <div class="item-rent-block_name">
                <label class="checkbox">
                  <input type="checkbox" role="switch" class="all-positions">
                </label>
                <a href="{{url_for('get_live_search_test', list_id=project.id) }}">{{ project.name }}</a>
              </div>
            </div>
            <div class="item-rent__project item-rent-block">
                <span class="item-rent__domain">
                  <a href="positions_table.html">{{ project.main_domain }}</a>
                </span>
            </div>
            <div class="item-rent__count item-rent-block">{{ project.query_count }}</div>
            <div class="item-rent__menu item-rent-block">
                <div class="item-rent__refresh">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M22.6982 11.8754H20H19.875V12.0004C19.875 16.3513 16.351 19.8754 12 19.8754C10.511 19.8754 9.12245 19.455 7.93987 18.7373L9.22299 17.4542C10.0522 17.8864 11.0026 18.1254 12 18.1254C15.379 18.1254 18.125 15.3794 18.125 12.0004V11.8754H18H15.3018L19 8.17714L22.6982 11.8754ZM5.875 12.0004V12.1254H6H8.69822L5 15.8236L1.30178 12.1254H4H4.125V12.0004C4.125 7.6494 7.64904 4.12537 12 4.12537C13.489 4.12537 14.8775 4.54573 16.0601 5.26346L14.777 6.54658C13.9478 6.11428 12.9974 5.87537 12 5.87537C8.62096 5.87537 5.875 8.62133 5.875 12.0004Z" fill="#0076F5" stroke="white" stroke-width="0.25" />
                    </svg>
                </div>
                <div class="item-rent__text">
                    <span>Обновлено</span>
                    <div class="item-rent__date">18.10.2024 в 10:11</div>
                </div>
                <a href="{{ url_for('edit_live_search', list_id=project.id) }}" class="item-rent__change">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M13.9372 9.24505L13.8311 9.13898L13.725 9.24505L5.67171 17.2984L5.62778 17.3423V17.4044V18.2222V18.3722H5.77778H6.59556H6.65769L6.70162 18.3283L14.755 10.275L14.861 10.1689L14.755 10.0628L13.9372 9.24505ZM19.6363 7.48494L19.6362 7.48505L18.1156 9.00565L14.9944 5.88444L16.515 4.36384C16.6547 4.22412 16.8472 4.15 17.0311 4.15C17.2259 4.15 17.4089 4.21657 17.5562 4.36384L19.6362 6.44384L19.6363 6.44395C19.7047 6.51225 19.759 6.59338 19.7961 6.6827C19.8331 6.77201 19.8522 6.86775 19.8522 6.96444C19.8522 7.06114 19.8331 7.15688 19.7961 7.24619C19.759 7.33551 19.7047 7.41664 19.6363 7.48494ZM4.15 16.7288L13.8311 7.04769L16.9523 10.1689L7.2712 19.85H4.15V16.7288Z" fill="#0076F5" stroke="white" stroke-width="0.3" />
                    </svg>
                </a>
                <div onClick=deleteList("{{project.name}}") class="item-rent__delete">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <mask id="mask0_2001_20925" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="24">
                          <rect width="24" height="24" fill="#D9D9D9" />
                        </mask>
                        <g mask="url(#mask0_2001_20925)">
                          <path d="M5.975 6.66667V6.56667H5.875H5.1V4.98889H9.375H9.475V4.88889V4.1H14.525V4.88889V4.98889H14.625H18.9V6.56667H18.125H18.025V6.66667V18.2222C18.025 18.6849 17.864 19.0782 17.5397 19.4076C17.2154 19.737 16.829 19.9 16.375 19.9H7.625C7.171 19.9 6.78456 19.737 6.46033 19.4076C6.13605 19.0782 5.975 18.6849 5.975 18.2222V6.66667ZM16.475 6.66667V6.56667H16.375H7.625H7.525V6.66667V18.2222V18.3222H7.625H16.375H16.475V18.2222V6.66667ZM11.025 8.54444V16.3444H9.475V8.54444H11.025ZM14.525 8.54444V16.3444H12.975V8.54444H14.525Z" fill="#E50C00" stroke="#FFE7E6" stroke-width="0.2" />
                        </g>
                    </svg>
                </div>
            </div>
        </div>
      {% endfor %}
    </div>
  </div>
  <div class="pos-pag">
    <div class="pos-pag__delete">
      <button class="delete-button btn-reset">
        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
          <mask id="mask0_2082_5379" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="25">
            <rect y="0.5" width="24" height="24" fill="#D9D9D9" />
          </mask>
          <g mask="url(#mask0_2082_5379)">
            <path d="M5.975 7.16667V7.06667H5.875H5.1V5.48889H9.375H9.475V5.38889V4.6H14.525V5.38889V5.48889H14.625H18.9V7.06667H18.125H18.025V7.16667V18.7222C18.025 19.1849 17.864 19.5782 17.5397 19.9076C17.2154 20.237 16.829 20.4 16.375 20.4H7.625C7.171 20.4 6.78456 20.237 6.46033 19.9076C6.13605 19.5782 5.975 19.1849 5.975 18.7222V7.16667ZM16.475 7.16667V7.06667H16.375H7.625H7.525V7.16667V18.7222V18.8222H7.625H16.375H16.475V18.7222V7.16667ZM11.025 9.04444V16.8444H9.475V9.04444H11.025ZM14.525 9.04444V16.8444H12.975V9.04444H14.525Z" fill="#E50C00" stroke="#FDF4F4" stroke-width="0.2" />
          </g>
        </svg>
        <span>Удалить</span>
      </button>
      <span>Выбрано слов <span class="pos-pag__delete-count">1</span></span>
      
      <div class="copy-wrap">
        <button class="btn copy-button btn-reset">
          <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <mask id="mask0_2001_7957" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="25">
              <rect y="0.5" width="24" height="24" fill="#D9D9D9" />
            </mask>
            <g mask="url(#mask0_2001_7957)">
              <path d="M9.84118 15.7V15.8H9.94118H17.3529H17.4529V15.7V6.1V6H17.3529H9.94118H9.84118V6.1V15.7ZM6.64706 19H15.6059V20.4H6.64706C6.21993 20.4 5.85724 20.2533 5.5535 19.9583C5.24986 19.6633 5.1 19.3123 5.1 18.9V7.8H6.54706V18.9V19H6.64706ZM9.94118 17.2C9.51404 17.2 9.15135 17.0533 8.84762 16.7583C8.54397 16.4633 8.39412 16.1123 8.39412 15.7V6.1C8.39412 5.68769 8.54397 5.3367 8.84762 5.04173C9.15135 4.74667 9.51404 4.6 9.94118 4.6H17.3529C17.7801 4.6 18.1428 4.74667 18.4465 5.04173C18.7501 5.3367 18.9 5.68769 18.9 6.1V15.7C18.9 16.1123 18.7501 16.4633 18.4465 16.7583C18.1428 17.0533 17.7801 17.2 17.3529 17.2H9.94118Z" fill="#0076F5" stroke="#DFEFFF" stroke-width="0.2" />
            </g>
          </svg>
          <span>Скопировать</span>
        </button>
        <div class="project__dropdown-wrapper">
          <span class="copy-variant">Список слов</span>
          <span class="copy-variant">Список слов с данными </span>
          <span class="copy-variant">Список слов с данными и суммами</span>
        </div>

      </div>
      <div class="search-folders search-projects-menu">
        <div class="btn select-project-btn btn-grouping btn-reset">
          <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7.11111 16.5V9.38889H0V7.61111H7.11111V0.5H8.88889V7.61111H16V9.38889H8.88889V16.5H7.11111Z" fill="#0076F5" />
          </svg>
          <span>В группу</span>
          <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10.5714 6.5C10.651 6.5 10.729 6.52069 10.7967 6.55974C10.8644 6.59879 10.9192 6.65467 10.9548 6.72111C10.9903 6.78756 11.0054 6.86194 10.9983 6.93592C10.9911 7.00991 10.962 7.08057 10.9143 7.14L8.34286 10.34C8.30294 10.3897 8.25117 10.43 8.19166 10.4578C8.13215 10.4855 8.06653 10.5 8 10.5C7.93347 10.5 7.86785 10.4855 7.80834 10.4578C7.74883 10.43 7.69706 10.3897 7.65714 10.34L5.08572 7.14C5.03796 7.08057 5.00888 7.00991 5.00173 6.93592C4.99458 6.86194 5.00965 6.78756 5.04525 6.72112C5.08084 6.65467 5.13555 6.59879 5.20326 6.55974C5.27096 6.52069 5.34898 6.5 5.42857 6.5L10.5714 6.5Z" fill="#0076F5" />
          </svg>
        </div>
        <div class="search__dropdown-wrapper">
          <div class="project__dropdown">
            <div class="input-wrap">
              <input  id="input-search" type="text" class="input input--icon" placeholder="Введите название группы">
              <label class="input-wrap-icon" for="input-search"></label>
            </div>
            <div class="search__folders-wrap">
              <div class="folder" data-visible="false">
                <div class="folder__btn btn-reset" >
                  <span>Папка 1</span>
                </div>
              </div>
              <div class="folder" data-visible="false">
                <div class="folder__btn btn-reset" >
                  <span>Папка 2</span>
                </div>
              </div>
              <div class="folder" data-visible="false">
                <div class="folder__btn btn-reset" >
                  <span>Папка 3</span>
                </div>
              </div>
            </div>
            <div class="btn btn-reset btn-new-folder active">
              <svg width="24" height="24">
                <use href="/static/img/svg/sprite.svg#add"></use>
              </svg>
              <span class="btn-new-folder-text">Новая папка</span>
            </div>
            <div class="add-folder">
              <input
              type="text"
              class="input add-folder-name"
              placeholder="Введите название  
              "
              />
              <div class="btn btn-reset btn-create-folder-pop">
                <svg width="24" height="24">
                  <use href="/static/img/svg/sprite.svg#add"></use>
                </svg>
                <span class="btn-new-folder-text">Создать</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="pos-pag__wrap">
      <div class="pos-pag__pages">
        <svg class="pos-pag__arrow-1" width="10" height="17" viewBox="0 0 10 17" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9.28697 1.92L2.7585 8.39349L2.65108 8.5L2.7585 8.60651L9.28696 15.08L8.06794 16.2888L0.213035 8.5L8.06794 0.711241L9.28697 1.92Z" fill="#747474" stroke="white" stroke-width="0.3" />
        </svg>
        <span>Страница</span>
        <input type="text" class="input short--input" value="1">
        <span>Из 5</span>
        <svg class="pos-pag__arrow-2" width="10" height="17" viewBox="0 0 10 17" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M0.213035 1.92L6.7415 8.39349L6.84892 8.5L6.7415 8.60651L0.213036 15.08L1.43206 16.2888L9.28697 8.5L1.43206 0.711241L0.213035 1.92Z" fill="#747474" stroke="white" stroke-width="0.3" />
        </svg>
      </div>
      <div class="pos-pag__items">
        <div class="pos-pag__variables">
          <button class="pos-pag-button btn-reset">
            <span>50</span>
            <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10.5714 6.5C10.651 6.5 10.729 6.52069 10.7967 6.55974C10.8644 6.59879 10.9192 6.65467 10.9548 6.72111C10.9903 6.78756 11.0054 6.86194 10.9983 6.93592C10.9911 7.00991 10.962 7.08057 10.9143 7.14L8.34286 10.34C8.30294 10.3897 8.25117 10.43 8.19166 10.4578C8.13215 10.4855 8.06653 10.5 8 10.5C7.93347 10.5 7.86785 10.4855 7.80834 10.4578C7.74883 10.43 7.69706 10.3897 7.65714 10.34L5.08572 7.14C5.03796 7.08057 5.00888 7.00991 5.00173 6.93592C4.99458 6.86194 5.00965 6.78756 5.04525 6.72112C5.08084 6.65467 5.13555 6.59879 5.20326 6.55974C5.27096 6.52069 5.34898 6.5 5.42857 6.5L10.5714 6.5Z" fill="#747474" />
            </svg>
          </button>
          <div class="project__dropdown-wrapper">
            <div class="pos-pag__variable">50</div>
            <div class="pos-pag__variable">100</div>
            <div class="pos-pag__variable">500</div>
            <div class="pos-pag__variable">1000</div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
{% block scripts %}
  <script>
     function deleteList(listName) {
        if (listName) {

            fetch('{{ url_for('delete_live_search_list') }}', {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ name: listName })
            })
            .then(response => {
                if (!response.ok) {
                    return response.json().then(err => Promise.reject(err));
                }
                return response.json();
            })
            .then(data => {
                console.log('List deleted:', data);
                window.location.reload();
            })
            .catch((error) => {
                console.error('Error:', error);
                alert(`Error: ${error.error || 'Unable to delete list.'}`);
            });
        } else {
            alert('Please enter a list name.');
        }
    } 
  </script>
{% endblock %}